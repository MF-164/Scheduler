<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>Test_InsertTask.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "doctest.h"
#include &lt;memory&gt;
#include "../Main/Scheduler.h"
#include "Helper.h"

<span style = "background-color:#dfd">TEST_CASE("Test Scheduler::InsertTask") {</span>
    Scheduler scheduler;

<span style = "background-color:#dfd">    SUBCASE("Insert a critical task") {
        shared_ptr&lt;Task&gt; criticalTask(new Task(Scheduler::taskIds++, PrioritiesLevel::CRITICAL, 5));
        scheduler.insertTask(criticalTask);</span>

<span style = "background-color:#dfd">        CHECK_EQ(scheduler.getRealTimeScheduler().getRealTimeQueue().size(), 1); // Assuming realTimeScheduler has a method to get the task count</span>

        //scheduler.getRealTimeScheduler().getRealTimeQueue().pop();
<span style = "background-color:#dfd">    }</span>

<span style = "background-color:#dfd">    SUBCASE("Insert a non-critical task") {
        shared_ptr&lt;Task&gt; nonCriticalTask(new Task(Scheduler::taskIds++, PrioritiesLevel::LOWER, 5));
        scheduler.insertTask(nonCriticalTask);</span>

<span style = "background-color:#dfd">        CHECK_EQ(scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::LOWER].queue.size(), 1); // Assuming wrrQueues has a method to get the task count</span>

<span style = "background-color:#dfd">        scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::LOWER].queue.pop();
    }
    SUBCASE("Insert a null task") {
        int realTimeQueueSize = scheduler.getRealTimeScheduler().getRealTimeQueue().size();
        int higherQueueSize = scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::HIGHER].queue.size();
        int midddleQueueSize = scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::MIDDLE].queue.size();
        int lowerQueueSize = scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::LOWER].queue.size();</span>

<span style = "background-color:#dfd">        int prevTotalRuningTask = Scheduler::totalRunningTask;</span>

<span style = "background-color:#dfd">        shared_ptr&lt;Task&gt; nullTask = nullptr;</span>

<span style = "background-color:#dfd">        scheduler.insertTask(nullTask);</span>

        // Check that no tasks were added
<span style = "background-color:#dfd">        CHECK_EQ(scheduler.getRealTimeScheduler().getRealTimeQueue().size(), realTimeQueueSize);
        CHECK_EQ(scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::HIGHER].queue.size(), higherQueueSize);
        CHECK_EQ(scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::MIDDLE].queue.size(), midddleQueueSize);
        CHECK_EQ(scheduler.getWrrQueuesScheduler().getWrrQueues()[PrioritiesLevel::LOWER].queue.size(), lowerQueueSize);</span>

        // You might also want to check that totalRunningTask wasn't incremented
        // This assumes you have a method to get totalRunningTask
<span style = "background-color:#dfd">        CHECK_EQ(Scheduler::totalRunningTask, prevTotalRuningTask);
    }
    PopAllTheQueue(scheduler);</span>

<span style = "background-color:#dfd">}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>