<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>Test_Utility.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "doctest.h"
#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include "../Main/Utility.h"

<span style = "background-color:#dfd">TEST_CASE("Utility::integerValidation") {</span>
    // Create a stringstream for capturing output from std::cerr
<span style = "background-color:#dfd">    std::ostringstream cerrStream;
    std::streambuf* oldCerrStream = std::cerr.rdbuf(cerrStream.rdbuf());</span>

    // Test valid input
<span style = "background-color:#dfd">    SUBCASE("Valid input") {
        std::istringstream cinStream("123\n");
        std::streambuf* oldCinStream = std::cin.rdbuf(cinStream.rdbuf());</span>

<span style = "background-color:#dfd">        int result = Utility::integerValidation("Enter number:", "TestVariable", false);
        CHECK_EQ(result, 123);
        CHECK(cerrStream.str().empty());</span>

<span style = "background-color:#dfd">        std::cin.rdbuf(oldCinStream); // Restore std::cin
    }</span>

    // Test invalid non-numeric input
<span style = "background-color:#dfd">    SUBCASE("Invalid non-numeric input") {
        std::istringstream cinStream("abc\n123\n");
        std::streambuf* oldCinStream = std::cin.rdbuf(cinStream.rdbuf());</span>

<span style = "background-color:#dfd">        int result = Utility::integerValidation("Enter number:", "TestVariable", false);
        CHECK_EQ(result, 123);
        CHECK(cerrStream.str() == "Invalid input. TestVariable should contain only numeric digits.\n");</span>

<span style = "background-color:#dfd">        std::cin.rdbuf(oldCinStream); // Restore std::cin
    }</span>

    // Test invalid negative input with a valid input after invalid ones
<span style = "background-color:#dfd">    SUBCASE("Invalid negative input") {
        std::istringstream cinStream("-5\n5\n");
        std::streambuf* oldCinStream = std::cin.rdbuf(cinStream.rdbuf());</span>

<span style = "background-color:#dfd">        int result = Utility::integerValidation("Enter number:", "TestVariable", false);
        CHECK_EQ(result, 5);
        CHECK(cerrStream.str() == "Invalid input: TestVariable cannot be negative.\n");</span>

<span style = "background-color:#dfd">        std::cin.rdbuf(oldCinStream); // Restore std::cin
    }</span>

   //  Test valid negative input
<span style = "background-color:#dfd">    SUBCASE("Valid negative input") {
        std::istringstream cinStream("-5\n");
        std::streambuf* oldCinStream = std::cin.rdbuf(cinStream.rdbuf());</span>

<span style = "background-color:#dfd">        int result = Utility::integerValidation("Enter number:", "TestVariable", true);
        CHECK_EQ(result, -5);
        CHECK(cerrStream.str().empty());</span>

<span style = "background-color:#dfd">        std::cin.rdbuf(oldCinStream); // Restore std::cin
    }</span>

    // Restore std::cerr
<span style = "background-color:#dfd">    std::cerr.rdbuf(oldCerrStream);
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>